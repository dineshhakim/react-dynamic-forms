{% extends "partials/header.html" %}

{% block site_nav %}
  <!-- Add a toggle button for the navigation -->
  <div class="md-header__nav-toggle">
    <button id="toggleNav" class="md-header__button md-icon">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </button>
  </div>
  {{ super() }}
  
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const toggleNavButton = document.getElementById('toggleNav');
      const navDrawer = document.querySelector('.md-sidebar--primary');
      
      // Check if the nav state is stored in localStorage
      const isNavHidden = localStorage.getItem('navHidden') === 'true';
      
      // Set initial state
      if (isNavHidden && window.innerWidth > 1220) {
        document.body.classList.add('nav-hidden');
      }
      
      toggleNavButton.addEventListener('click', function() {
        document.body.classList.toggle('nav-hidden');
        const isHidden = document.body.classList.contains('nav-hidden');
        
        // Store the state in localStorage
        localStorage.setItem('navHidden', isHidden);
      });
    });
  </script>
  
  <style>
    .md-header__nav-toggle {
      display: none;
    }
    
    @media screen and (min-width: 1220px) {
      .md-header__nav-toggle {
        display: block;
        margin-right: 0.5rem;
      }
      
      body.nav-hidden .md-sidebar--primary {
        transform: translateX(-100%);
        opacity: 0;
        pointer-events: none;
      }
      
      .md-sidebar--primary {
        transition: transform 0.25s ease-in-out, opacity 0.25s ease-in-out;
      }
      
      body.nav-hidden .md-content {
        margin-left: 0;
      }
      
      body.nav-hidden .md-content__inner {
        margin-left: 0;
      }
    }
  </style>
{% endblock %}
